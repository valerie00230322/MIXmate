#:import MDSwitch kivymd.uix.selectioncontrol.MDSwitch
#:import MDCard kivymd.uix.card.MDCard
#:import MDLabel kivymd.uix.label.MDLabel
#:import MDBoxLayout kivymd.uix.boxlayout.MDBoxLayout
#:import MDRaisedButton kivymd.uix.button.MDRaisedButton

<AdminScreen>:
    MDBoxLayout:
        orientation: "vertical"
        spacing: "20dp"
        padding: "40dp"
        md_bg_color: 0.05, 0.07, 0.12, 1

        MDLabel:
            text: "Admin Dashboard"
            halign: "center"
            font_style: "H4"
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1

        # --- NEU: Simulation-Toggle (unter der Überschrift) ---
        MDCard:
            size_hint: 1, None
            height: "72dp"
            padding: "16dp"
            radius: [12, 12, 12, 12]
            md_bg_color: 0.13, 0.16, 0.22, 1

            MDBoxLayout:
                orientation: "horizontal"
                spacing: "16dp"

                MDLabel:
                    text: "Simulation (I²C emulieren)"
                    font_style: "Subtitle1"
                    theme_text_color: "Custom"
                    text_color: 1,1,1,1
                    halign: "left"
                    valign: "middle"

                MDSwitch:
                    id: sim_switch                      # wird vom Controller synchronisiert
                    pos_hint: {"center_y": .5}
                    on_active: app.controller.set_simulation(self.active)

        MDRaisedButton:
            text: "Rezepte exportieren"
            pos_hint: {"center_x": 0.5}
            on_release: app.controller.admin_controller.export_recipes()

        MDRaisedButton:
            text: "Rezepte importieren"
            pos_hint: {"center_x": 0.5}
            on_release: app.controller.admin_controller.import_recipes()

        MDRaisedButton:
            text: "Logout"
            pos_hint: {"center_x": 0.5}
            on_release: app.controller.admin_controller.logout()
